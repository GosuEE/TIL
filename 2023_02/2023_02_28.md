# 프로젝트 간단 설명

<눈치 코치 캐치> 프로젝트 진행 과정에서 작업한 일들에 대한 간단한 설명입니다.

- [Canvas API](#Canvas-API)
  - [그림 그리기 기능](#그림-그리기-기능)

## Canvas API

게임 진행 과정에서 가장 중요한 그림판을 구현하기 위해 Canvas API를 사용했습니다.
<b>종종 보이는 GAEventTrack은 데이터를 수집하기 위해 적용시킨 google analytics입니다.</b>

### 그림 그리기 기능

[ 가장 먼저, 그림판의 context를 초기화하는 hook입니다. ](https://github.com/GosuEE/trys-ketch-client/blob/dev/src/hooks/useCtx.jsx)

그림을 그리는 과정에서 변할 수 있는 context들을 초기 상태로 바꿔줍니다.

[ 그림을 그리는 과정에서 사용되는 다양한 함수들입니다. ](https://github.com/GosuEE/trys-ketch-client/blob/dev/src/utils/paintUtils.js)

```javascript
const startDrawing = (setIsDrawing) => {
  setIsDrawing(true);
};

const finishDrawing = (setIsDrawing) => {
  setIsDrawing(false);
};
```

isDrawing state를 변경시켜주는 함수입니다.

***

```javascript
const drawing = (ctx, isDrawing, { nativeEvent }) => {
  const { offsetX, offsetY } = nativeEvent;
  if (ctx) {
    if (!isDrawing) {
      ctx.beginPath();
      ctx.moveTo(offsetX, offsetY);
    } else {
      ctx.lineTo(offsetX, offsetY);
      ctx.stroke();
    }
  }
};
```

선을 그리는 함수입니다. drawing이 true면 lineTo로 그림을 그리고, false면 moveTo로 위치만 이동시킵니다.

***

```javascript
function setThickness(pixel, canvasRef, setCtx, eventState) {
  const context = canvasRef.current.getContext('2d');
  if (eventState !== EVENT_STATE.ERASEING) context.globalCompositeOperation = 'source-over';
  context.lineWidth = pixel;
  setCtx(context);
  GAEventTrack(GAEventTypes.Category.paintTool, GAEventTypes.Action.paintTool.Thickness);
}

function setColor(c, canvasRef, setCtx) {
  const context = canvasRef.current.getContext('2d');
  context.globalCompositeOperation = 'source-over';
  context.strokeStyle = c;
  setCtx(context);
  GAEventTrack(GAEventTypes.Category.paintTool, GAEventTypes.Action.paintTool.color, c);
}
```

선의 굵기와 색을 바꾸는 함수들입니다. 굵기와 색상은 상수로 따로 빼놓았습니다.
























