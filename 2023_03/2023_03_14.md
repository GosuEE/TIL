# nodejs 서버 구축하기

- [express.js](#express.js)
- [nodemon](#nodemon)

## express.js

```bash
sudo npm install -g express
```

express를 전역으로 설치해준다.

```bash
sudo npm install -g express-generator
```

express의 기본 구조를 잡아주는 패키지인 express-generator를 설치한다.

```bash
express <프로젝트 이름>
```

express-generator를 통해 프로젝트를 생성해준다.

```bash
cd <프로젝트 이름>
npm install
```

node-modules에 있는 dependency들을 설치해준다

vscode에서 확인해보면 기본적인 폴더 구조와 App.js코드가 작성이 된 것을 확인할 수 있다!

## nodemon

서버 코드가 변경 될 때 마다 서버를 재시작하기는 조금 번거롭다. 이 때 nodemon을 사용하면 코드의 변경을 감지하고 서버를 재시작해준다!

```bash
sudo npm install -g nodemon
```

설지한 다음에, 다음의 코드를 실행한다.

```bash
nodemon ./app.js
```

코드가 바뀔 때 마다 서버가 재실행되는것을 확인할 수 있다

## API 통신

route의 index.js 파일에 다음과 같은 코드를 추가한다.

```javascript
router.get("/api/data", (req, res) => {
  const data = "connected";
  res.send(data);
});
```

프론트에서 다음과 같이 API 요청을 하면 데이터가 잘 들어오는것을 확인해 볼 수 있다.

```javascript
const instance = axios.create({
  baseURL: "http://localhost:3001",
});

instance.defaults.timeout = 2500;

async function fetchData() {
  const response = await instance.get(`/api/data`);
  return response;
}

function Test() {
  const [text, setText] = useState(null);

  useEffect(() => {
    fetchData().then((res) => {
      setText(res.data);
    });
  }, []);

  return <div>{text}</div>;
}

export default Test;
```
